import React from "react";
import styled from "styled-components";

const GPUUsageSVG = ({ usage }) => {
  // Ensure usage stays between 0-100
  const fillPercentage = Math.min(Math.max(usage, 0), 100);

  return (
    <SVGContainer>
      <svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="-10 -5 135 110">
        <defs>
          {/* Define a Clip Path that adjusts dynamically based on GPU usage */}
          <clipPath id="gpuClip">
            <rect
              x={100 - (fillPercentage * 1.1)} // Adjust based on rotated coordinates
              y="-5"
              width="100"
              height="100"
              fill="white"
            />
          </clipPath>
        </defs>

        {/* GPU Shape with Stroke */}
        <g transform="rotate(90, 55, 55)">
          <path
            d="m95.707 39.68-6.7539-6.7539c-0.1875-0.1875-0.44141-0.29297-0.70703-0.29297h-76.246v-2.1055c0-0.55469-0.44922-1-1-1h-6c-1.3125 0.019531-1.3164 1.9766 0 2h5v3.2891h-5c-0.55078 0-1 0.44531-1 1v7.2852c0 0.55469 0.44922 1 1 1h5v1.6406h-5c-0.55078 0-1 0.44531-1 1v16.023c0 0.55469 0.44922 1 1 1h5v5.7031c0.023438 1.3125 1.9766 1.3164 2 0v-3.5195h7v3.3711c0 0.55469 0.44922 1 1 1h29.137c0.55078 0 1-0.44531 1-1v-3.3711h4.6211v3.3711c0 0.55469 0.44922 1 1 1h13.242c0.55078 0 1-0.44531 1-1v-3.3711h18.246c0.26562 0 0.51953-0.10547 0.70703-0.29297l6.7539-6.7539c0.1875-0.1875 0.29297-0.44141 0.29297-0.70703v-17.812c0-0.26562-0.10547-0.51953-0.29297-0.70703zm-7.875-5.0469 6.168 6.168v3.2578h-4.1328c-1.1914-2.4844-3.2383-4.4805-5.7656-5.5859-0.007812-0.003906-0.015624-0.007812-0.027343-0.011718-3.5703-1.6484-8.3008-1.0742-11.352 1.2852-0.050781 0.027344-0.09375 0.066406-0.13672 0.10156-1.457 1.1055-2.6406 2.5469-3.4375 4.2109h-5.7852c-1.1914-2.4844-3.2383-4.4805-5.7695-5.5898-0.007812-0.003906-0.015625-0.007812-0.023438-0.011719-3.5703-1.6484-8.3008-1.0742-11.352 1.2852-0.050781 0.027343-0.089844 0.066406-0.13672 0.10156-1.457 1.1055-2.6406 2.5469-3.4414 4.2148h-5.7852c-1.1914-2.4844-3.2383-4.4805-5.7656-5.5859-0.007813-0.003906-0.015625-0.007812-0.027344-0.011718-3.5703-1.6484-8.3008-1.0742-11.352 1.2852-0.050782 0.027344-0.089844 0.066406-0.13672 0.10156-1.4609 1.1055-2.6445 2.5469-3.4414 4.2148h-4.1328v-9.4258h75.832zm6.168 17.898h-3.5586c0.49219-1.4961 0.67969-3.2148 0.48438-4.8203 0-0.011719-0.003906-0.023438-0.003906-0.035157-0.0625-0.55078-0.17188-1.0898-0.3125-1.6133h3.3945v6.4727zm-82-5.7891v-0.68359h3.3945c-0.36328 1.3359-0.49219 2.8281-0.31641 4.2305 0 0.011719 0.003906 0.023438 0.003906 0.035157 0.089844 0.76172 0.24609 1.4961 0.47656 2.2031h-3.5586zm23.84 0.66406c-2.4688 2.5039-4.5508 2.5898-5.6328 2.3789 0.13672-0.60547 0.097657-1.2773-0.089843-1.8594 0.94922-0.88281 2.4648-2.9062 1.9727-6.5742 1.9492 1.4297 3.3281 3.5781 3.75 6.0547zm-9.3477 3.3906c-2.3711-0.0625-2.3711-3.5352 0-3.5977 2.3711 0.0625 2.3711 3.5352 0 3.5977zm3.293-10.688c0.9375 3.4062-0.039062 5.25-0.76562 6.0781-0.46484-0.41797-1.0234-0.72266-1.6484-0.87109-0.29297-1.2656-1.2969-3.5859-4.7148-4.9922 2.1445-0.99219 4.9141-1.082 7.1289-0.21484zm-9.3516 1.5898c3.4258 0.89062 4.5352 2.6641 4.8906 3.7031-0.60938 0.19922-1.1484 0.53516-1.5781 0.98828-1.2422-0.38281-3.7578-0.67188-6.6875 1.5938 0.26953-2.5195 1.5273-4.75 3.3789-6.2891zm-3.2891 8.8945c2.4688-2.5039 4.5508-2.5898 5.6328-2.3789-0.14062 0.60547-0.097656 1.2773 0.089844 1.8594-0.94922 0.88281-2.4648 2.9062-1.9727 6.5742-1.9492-1.4297-3.3281-3.5781-3.75-6.0547zm6.0547 7.2969c-0.9375-3.4062 0.039062-5.2539 0.76562-6.0781 0.46484 0.41797 1.0234 0.72266 1.6484 0.87109 0.29297 1.2656 1.2969 3.5859 4.7148 4.9922-2.1445 0.99219-4.9141 1.082-7.1289 0.21484zm9.3516-1.5898c-3.4258-0.89062-4.5352-2.6641-4.8906-3.7031 0.60938-0.19922 1.1484-0.53516 1.5781-0.99219 2.2539 0.58203 4.1211 0.27344 6.6875-1.5977-0.26562 2.5234-1.5234 4.7539-3.3789 6.2969zm5.4336-7.3008c0-0.4375-0.03125-0.86719-0.078125-1.2891 0-0.011719-0.003906-0.023438-0.003906-0.035157-0.0625-0.55078-0.17188-1.0898-0.3125-1.6133h4.3125c-0.36328 1.3359-0.49219 2.8281-0.31641 4.2305 0 0.011719 0.003906 0.019531 0.003906 0.027343 0.089844 0.76172 0.25 1.5 0.47656 2.2109h-4.6445c0.35938-1.1133 0.55859-2.2969 0.55859-3.5312zm24.363-1.5938c-2.4688 2.5039-4.5508 2.5898-5.6328 2.3789 0.13672-0.60547 0.097656-1.2773-0.089844-1.8594 0.94922-0.88281 2.4648-2.9062 1.9727-6.5742 1.9492 1.4297 3.3281 3.5781 3.75 6.0547zm-9.3477 3.3906c-2.3711-0.0625-2.3711-3.5352 0-3.5977 2.3711 0.0625 2.3711 3.5352 0 3.5977zm3.293-10.688c0.9375 3.4062-0.039063 5.2539-0.76562 6.0781-0.46484-0.41797-1.0234-0.72266-1.6484-0.87109-0.29297-1.2656-1.2969-3.5859-4.7148-4.9922 2.1445-0.99219 4.9141-1.082 7.1289-0.21484zm-9.3516 1.5898c3.4258 0.89062 4.5352 2.6641 4.8906 3.7031-0.60938 0.19922-1.1484 0.53516-1.5781 0.98828-1.2422-0.38281-3.7578-0.67188-6.6875 1.5938 0.26953-2.5195 1.5273-4.75 3.3789-6.2891zm-3.2891 8.8945c2.4688-2.5039 4.5508-2.5898 5.6328-2.3789-0.13672 0.60547-0.097656 1.2773 0.089844 1.8594-0.94922 0.88281-2.4648 2.9062-1.9727 6.5742-1.9492-1.4297-3.3281-3.5781-3.75-6.0547zm6.0547 7.2969c-0.9375-3.4062 0.039063-5.2539 0.76562-6.0781 0.46484 0.41797 1.0234 0.72266 1.6484 0.87109 0.29297 1.2656 1.2969 3.5859 4.7148 4.9922-2.1445 0.99219-4.9141 1.082-7.1289 0.21484zm9.3516-1.5898c-3.4258-0.89062-4.5352-2.6641-4.8906-3.7031 0.60938-0.19922 1.1484-0.53516 1.5781-0.99219 2.2539 0.58203 4.1211 0.27344 6.6875-1.5977-0.26562 2.5234-1.5234 4.7539-3.3789 6.2969zm5.4336-7.3008c0-0.4375-0.03125-0.86719-0.078126-1.293 0-0.011719-0.003906-0.019531-0.003906-0.027343-0.0625-0.55469-0.17578-1.0938-0.3125-1.6211h4.3125c-0.36328 1.3359-0.49219 2.8281-0.31641 4.2305 0 0.011719 0.003906 0.023438 0.003906 0.035157 0.089844 0.76172 0.24609 1.4961 0.47656 2.2031h-4.6445c0.35937-1.1133 0.55859-2.2969 0.55859-3.5312zm24.363-1.5938c-2.4688 2.5039-4.5508 2.5898-5.6328 2.3789 0.13672-0.60547 0.097656-1.2773-0.089844-1.8594 0.94922-0.88281 2.4648-2.9062 1.9727-6.5742 1.9492 1.4297 3.3281 3.5781 3.75 6.0547zm-9.3477 3.3906c-2.3711-0.0625-2.3711-3.5352 0-3.5977 2.3711 0.0625 2.3711 3.5352 0 3.5977zm3.293-10.688c0.9375 3.4062-0.039062 5.2539-0.76562 6.0781-0.46484-0.41797-1.0234-0.72266-1.6484-0.87109-0.29297-1.2656-1.2969-3.5859-4.7148-4.9922 2.1445-0.99219 4.9141-1.082 7.1289-0.21484zm-9.3516 1.5898c3.4258 0.89062 4.5352 2.6641 4.8906 3.7031-0.60547 0.19922-1.1484 0.53516-1.5781 0.98828-1.2422-0.38281-3.7578-0.67188-6.6875 1.5938 0.26953-2.5195 1.5273-4.75 3.3789-6.2891zm-3.2891 8.8945c2.4688-2.5039 4.5508-2.5898 5.6328-2.3789-0.13672 0.60547-0.097657 1.2773 0.089843 1.8594-0.94922 0.88281-2.4648 2.9062-1.9727 6.5742-1.9492-1.4297-3.3281-3.5781-3.75-6.0547zm6.0547 7.2969c-0.9375-3.4062 0.039062-5.25 0.76562-6.0781 0.46484 0.41797 1.0234 0.72266 1.6484 0.87109 0.29297 1.2656 1.2969 3.5859 4.7148 4.9922-2.1445 0.99219-4.9141 1.082-7.1289 0.21484zm9.3516-1.5898c-3.4258-0.89062-4.5352-2.6641-4.8906-3.7031 0.60938-0.19922 1.1484-0.53516 1.582-0.99219 2.2539 0.58203 4.1211 0.27344 6.6875-1.5977-0.26562 2.5234-1.5234 4.7539-3.3789 6.2969zm-79.566-14.199v-5.2852h4v5.2852zm0 19.668v-14.023h4v14.023zm42.137 6.5547h-27.137v-2.3711h27.137zm19.863 0h-11.242v-2.3711h11.242zm19.832-4.3711h-75.832v-9.4219h4.4258c3.0938 5.9414 11.488 7.8945 16.879 3.707 0.058593-0.035156 0.11328-0.074219 0.16406-0.125 1.2617-0.96875 2.3203-2.1836 3.0938-3.582h6.3711c3.0938 5.9414 11.488 7.8945 16.879 3.7031 0.058594-0.035156 0.11328-0.074219 0.16406-0.12109 1.2617-0.96875 2.3203-2.1836 3.0938-3.582h6.3711c3.0938 5.9414 11.488 7.8945 16.879 3.707 0.058594-0.035156 0.11719-0.074219 0.16797-0.125 1.2617-0.96875 2.3203-2.1836 3.0938-3.582h4.4258v3.2539l-6.168 6.168z"
            stroke="black"
            strokeWidth="2"
            fill="none"
          />

          {/* Filled GPU Shape (Uses Clip Path) */}
          <path
            d="m95.707 39.68-6.7539-6.7539c-0.1875-0.1875-0.44141-0.29297-0.70703-0.29297h-76.246v-2.1055c0-0.55469-0.44922-1-1-1h-6c-1.3125 0.019531-1.3164 1.9766 0 2h5v3.2891h-5c-0.55078 0-1 0.44531-1 1v7.2852c0 0.55469 0.44922 1 1 1h5v1.6406h-5c-0.55078 0-1 0.44531-1 1v16.023c0 0.55469 0.44922 1 1 1h5v5.7031c0.023438 1.3125 1.9766 1.3164 2 0v-3.5195h7v3.3711c0 0.55469 0.44922 1 1 1h29.137c0.55078 0 1-0.44531 1-1v-3.3711h4.6211v3.3711c0 0.55469 0.44922 1 1 1h13.242c0.55078 0 1-0.44531 1-1v-3.3711h18.246c0.26562 0 0.51953-0.10547 0.70703-0.29297l6.7539-6.7539c0.1875-0.1875 0.29297-0.44141 0.29297-0.70703v-17.812c0-0.26562-0.10547-0.51953-0.29297-0.70703zm-7.875-5.0469 6.168 6.168v3.2578h-4.1328c-1.1914-2.4844-3.2383-4.4805-5.7656-5.5859-0.007812-0.003906-0.015624-0.007812-0.027343-0.011718-3.5703-1.6484-8.3008-1.0742-11.352 1.2852-0.050781 0.027344-0.09375 0.066406-0.13672 0.10156-1.457 1.1055-2.6406 2.5469-3.4375 4.2109h-5.7852c-1.1914-2.4844-3.2383-4.4805-5.7695-5.5898-0.007812-0.003906-0.015625-0.007812-0.023438-0.011719-3.5703-1.6484-8.3008-1.0742-11.352 1.2852-0.050781 0.027343-0.089844 0.066406-0.13672 0.10156-1.457 1.1055-2.6406 2.5469-3.4414 4.2148h-5.7852c-1.1914-2.4844-3.2383-4.4805-5.7656-5.5859-0.007813-0.003906-0.015625-0.007812-0.027344-0.011718-3.5703-1.6484-8.3008-1.0742-11.352 1.2852-0.050782 0.027344-0.089844 0.066406-0.13672 0.10156-1.4609 1.1055-2.6445 2.5469-3.4414 4.2148h-4.1328v-9.4258h75.832zm6.168 17.898h-3.5586c0.49219-1.4961 0.67969-3.2148 0.48438-4.8203 0-0.011719-0.003906-0.023438-0.003906-0.035157-0.0625-0.55078-0.17188-1.0898-0.3125-1.6133h3.3945v6.4727zm-82-5.7891v-0.68359h3.3945c-0.36328 1.3359-0.49219 2.8281-0.31641 4.2305 0 0.011719 0.003906 0.023438 0.003906 0.035157 0.089844 0.76172 0.24609 1.4961 0.47656 2.2031h-3.5586zm23.84 0.66406c-2.4688 2.5039-4.5508 2.5898-5.6328 2.3789 0.13672-0.60547 0.097657-1.2773-0.089843-1.8594 0.94922-0.88281 2.4648-2.9062 1.9727-6.5742 1.9492 1.4297 3.3281 3.5781 3.75 6.0547zm-9.3477 3.3906c-2.3711-0.0625-2.3711-3.5352 0-3.5977 2.3711 0.0625 2.3711 3.5352 0 3.5977zm3.293-10.688c0.9375 3.4062-0.039062 5.25-0.76562 6.0781-0.46484-0.41797-1.0234-0.72266-1.6484-0.87109-0.29297-1.2656-1.2969-3.5859-4.7148-4.9922 2.1445-0.99219 4.9141-1.082 7.1289-0.21484zm-9.3516 1.5898c3.4258 0.89062 4.5352 2.6641 4.8906 3.7031-0.60938 0.19922-1.1484 0.53516-1.5781 0.98828-1.2422-0.38281-3.7578-0.67188-6.6875 1.5938 0.26953-2.5195 1.5273-4.75 3.3789-6.2891zm-3.2891 8.8945c2.4688-2.5039 4.5508-2.5898 5.6328-2.3789-0.14062 0.60547-0.097656 1.2773 0.089844 1.8594-0.94922 0.88281-2.4648 2.9062-1.9727 6.5742-1.9492-1.4297-3.3281-3.5781-3.75-6.0547zm6.0547 7.2969c-0.9375-3.4062 0.039062-5.2539 0.76562-6.0781 0.46484 0.41797 1.0234 0.72266 1.6484 0.87109 0.29297 1.2656 1.2969 3.5859 4.7148 4.9922-2.1445 0.99219-4.9141 1.082-7.1289 0.21484zm9.3516-1.5898c-3.4258-0.89062-4.5352-2.6641-4.8906-3.7031 0.60938-0.19922 1.1484-0.53516 1.5781-0.99219 2.2539 0.58203 4.1211 0.27344 6.6875-1.5977-0.26562 2.5234-1.5234 4.7539-3.3789 6.2969zm5.4336-7.3008c0-0.4375-0.03125-0.86719-0.078125-1.2891 0-0.011719-0.003906-0.023438-0.003906-0.035157-0.0625-0.55078-0.17188-1.0898-0.3125-1.6133h4.3125c-0.36328 1.3359-0.49219 2.8281-0.31641 4.2305 0 0.011719 0.003906 0.019531 0.003906 0.027343 0.089844 0.76172 0.25 1.5 0.47656 2.2109h-4.6445c0.35938-1.1133 0.55859-2.2969 0.55859-3.5312zm24.363-1.5938c-2.4688 2.5039-4.5508 2.5898-5.6328 2.3789 0.13672-0.60547 0.097656-1.2773-0.089844-1.8594 0.94922-0.88281 2.4648-2.9062 1.9727-6.5742 1.9492 1.4297 3.3281 3.5781 3.75 6.0547zm-9.3477 3.3906c-2.3711-0.0625-2.3711-3.5352 0-3.5977 2.3711 0.0625 2.3711 3.5352 0 3.5977zm3.293-10.688c0.9375 3.4062-0.039063 5.2539-0.76562 6.0781-0.46484-0.41797-1.0234-0.72266-1.6484-0.87109-0.29297-1.2656-1.2969-3.5859-4.7148-4.9922 2.1445-0.99219 4.9141-1.082 7.1289-0.21484zm-9.3516 1.5898c3.4258 0.89062 4.5352 2.6641 4.8906 3.7031-0.60938 0.19922-1.1484 0.53516-1.5781 0.98828-1.2422-0.38281-3.7578-0.67188-6.6875 1.5938 0.26953-2.5195 1.5273-4.75 3.3789-6.2891zm-3.2891 8.8945c2.4688-2.5039 4.5508-2.5898 5.6328-2.3789-0.13672 0.60547-0.097656 1.2773 0.089844 1.8594-0.94922 0.88281-2.4648 2.9062-1.9727 6.5742-1.9492-1.4297-3.3281-3.5781-3.75-6.0547zm6.0547 7.2969c-0.9375-3.4062 0.039063-5.2539 0.76562-6.0781 0.46484 0.41797 1.0234 0.72266 1.6484 0.87109 0.29297 1.2656 1.2969 3.5859 4.7148 4.9922-2.1445 0.99219-4.9141 1.082-7.1289 0.21484zm9.3516-1.5898c-3.4258-0.89062-4.5352-2.6641-4.8906-3.7031 0.60938-0.19922 1.1484-0.53516 1.5781-0.99219 2.2539 0.58203 4.1211 0.27344 6.6875-1.5977-0.26562 2.5234-1.5234 4.7539-3.3789 6.2969zm5.4336-7.3008c0-0.4375-0.03125-0.86719-0.078126-1.293 0-0.011719-0.003906-0.019531-0.003906-0.027343-0.0625-0.55469-0.17578-1.0938-0.3125-1.6211h4.3125c-0.36328 1.3359-0.49219 2.8281-0.31641 4.2305 0 0.011719 0.003906 0.023438 0.003906 0.035157 0.089844 0.76172 0.24609 1.4961 0.47656 2.2031h-4.6445c0.35937-1.1133 0.55859-2.2969 0.55859-3.5312zm24.363-1.5938c-2.4688 2.5039-4.5508 2.5898-5.6328 2.3789 0.13672-0.60547 0.097656-1.2773-0.089844-1.8594 0.94922-0.88281 2.4648-2.9062 1.9727-6.5742 1.9492 1.4297 3.3281 3.5781 3.75 6.0547zm-9.3477 3.3906c-2.3711-0.0625-2.3711-3.5352 0-3.5977 2.3711 0.0625 2.3711 3.5352 0 3.5977zm3.293-10.688c0.9375 3.4062-0.039062 5.2539-0.76562 6.0781-0.46484-0.41797-1.0234-0.72266-1.6484-0.87109-0.29297-1.2656-1.2969-3.5859-4.7148-4.9922 2.1445-0.99219 4.9141-1.082 7.1289-0.21484zm-9.3516 1.5898c3.4258 0.89062 4.5352 2.6641 4.8906 3.7031-0.60547 0.19922-1.1484 0.53516-1.5781 0.98828-1.2422-0.38281-3.7578-0.67188-6.6875 1.5938 0.26953-2.5195 1.5273-4.75 3.3789-6.2891zm-3.2891 8.8945c2.4688-2.5039 4.5508-2.5898 5.6328-2.3789-0.13672 0.60547-0.097657 1.2773 0.089843 1.8594-0.94922 0.88281-2.4648 2.9062-1.9727 6.5742-1.9492-1.4297-3.3281-3.5781-3.75-6.0547zm6.0547 7.2969c-0.9375-3.4062 0.039062-5.25 0.76562-6.0781 0.46484 0.41797 1.0234 0.72266 1.6484 0.87109 0.29297 1.2656 1.2969 3.5859 4.7148 4.9922-2.1445 0.99219-4.9141 1.082-7.1289 0.21484zm9.3516-1.5898c-3.4258-0.89062-4.5352-2.6641-4.8906-3.7031 0.60938-0.19922 1.1484-0.53516 1.582-0.99219 2.2539 0.58203 4.1211 0.27344 6.6875-1.5977-0.26562 2.5234-1.5234 4.7539-3.3789 6.2969zm-79.566-14.199v-5.2852h4v5.2852zm0 19.668v-14.023h4v14.023zm42.137 6.5547h-27.137v-2.3711h27.137zm19.863 0h-11.242v-2.3711h11.242zm19.832-4.3711h-75.832v-9.4219h4.4258c3.0938 5.9414 11.488 7.8945 16.879 3.707 0.058593-0.035156 0.11328-0.074219 0.16406-0.125 1.2617-0.96875 2.3203-2.1836 3.0938-3.582h6.3711c3.0938 5.9414 11.488 7.8945 16.879 3.7031 0.058594-0.035156 0.11328-0.074219 0.16406-0.12109 1.2617-0.96875 2.3203-2.1836 3.0938-3.582h6.3711c3.0938 5.9414 11.488 7.8945 16.879 3.707 0.058594-0.035156 0.11719-0.074219 0.16797-0.125 1.2617-0.96875 2.3203-2.1836 3.0938-3.582h4.4258v3.2539l-6.168 6.168z"
            fill="#ff007f"
            clipPath="url(#gpuClip)" // Apply dynamic masking
          />
        </g>
      </svg>

      {/* GPU Usage Text */}
      <UsageText>{fillPercentage.toFixed(1)}%</UsageText>
    </SVGContainer>
  );
};

const SVGContainer = styled.div`
  width: 250px;
  height: 250px;
  display: flex;
  align-items: center;
  justify-content: center;
  position: relative;
`;

const UsageText = styled.div`
  position: absolute;
  color: #ff007f;
  font-size: 18px;
  font-weight: bold;
  text-align: center;
  display: flex;
  width: 250px;
  justify-content: center;
  align-items: center;
`;

export default GPUUsageSVG;
